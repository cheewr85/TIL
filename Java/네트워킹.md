### 네트워킹

- 두 대 이상의 컴퓨터를 케이블로 연결하여 네트워크를 구성하는 것을 말함
- 컴퓨터들을 서로 연결하여 데이터를 손쉽게 주고 받거나 주변기기를 함께 공유가 가능함
- [java.net](http://java.net) 패키지 사용하면 이러한 네트워크 어플리케이션의 데이터 통신 부분

### 클라이언트/서버(Client/server)

- 서버는 서비스를 제공하는 컴퓨터이고, 클라이언트는 서비스를 사용하는 컴퓨터가 됨
- 하드웨어의 사양에 관계없이 서비스를 제공하는 소프트웨어가 실행되는 컴퓨터를 서버라고 함
- 서비스는 서버가 클라이언트로부터 요청받은 작업을 처리하여 그 결과를 제공하는 것을 뜻함
- 서버가 제공하는 서비스의 종류에 따라 파일서버, 메일서버, 어플리케이션 서버등이 있음
- 파일서버는 클라이언트가 요청한 파일을 제공하는 서비스임
- 서버에 접속하는 클라이언트의 수에 따라 하나의 서버가 여러 가지 서비스를 제공하기도 하고 하나의 서비스를 여러 대의 서버가 제공하기도 함
- 서버가 서비스를 제공하기 위해서는 서버프로그램이 있어야 하고 클라이언트가 서비스를 제공받기 위해서는 서버프로그램과 연결할 수 있는 클라이언트 프로그램이 있어야 함
- 일반 PC의 경우 주로 서버에 접속하는 클라이언트 역할을 수행하지만 웹서버프로그램을 설치하여 서버역할도 수행할 수 있음
- 클라이언트프로그램과 서버프로그램을 하나로 합쳐서 클라이언트인 동시에 서버가 되어 다른 컴퓨터로부터 파일을 가져오는 동시에 또 다른 컴퓨터에게 파일을 제공할 수 있음
- 서버기반 모델
    - 안정적인 서비스의 제공이 가능함
    - 공유 데이터의 관리와 보안이 용이함
    - 서버구축비용과 관리비용이 듬
- P2P 모델
    - 서버구축 및 운용비용을 절감할 수 있음
    - 자원의 활용을 극대화 할 수 있음
    - 자원의 관리가 어려움
    - 보안이 취약함

### IP주소(IP address)

- IP주소는 컴퓨터를 구별하는데 사용되는 고유한 값으로 인터넷에 연결된 모든 컴퓨터는 IP주소를 가짐
- IP주소를 네트워크주소와 호스트주소로 나눌 수 있는데, IP주소 중에서 네트워크주소와 호스트주소가 각각 몇 bit씩 차지하는 지는 네트워크를 어떻게 구성하느냐에 따라 다름
- 서로 다른 두 호스트의 IP주소의 네트워크주소가 같다는 것은 두 호스트가 같은 네트워크에 포함되어 있다는 것을 의미함

### InetAddress

- IP주소를 다루기 위한 클래스로 IP를 사용하기 위한 다양한 메서드가 정의되어 있음

### URL(Uniform Resource Locator)

- 인터넷에 존재하는 여러 서버들이 제공하는 자원에 접근할 수 있는 주소를 표현하기 위한 것
- `프로토콜://호스트명:포트번호/경로명/파일명?쿼리스트링#참조`
- 위와 같은 형태를 띈다
- 이러한 URL을 핸들링 하기 위해서 다양한 메소드를 활용할 수 있음

### URLConnection

- 어플리케이션과 URL간의 통신연결을 나타내는 클래스의 최상위 클래스로 추상클래스임
- 이를 상속받아 구현한 클래스는 HttpURLConnection & JarURLConnection이 있음
- 이를 활용하여 연결하고자 하는 자원에 접근하고 읽고 쓰기를 할 수 있음
- 그 외에 관련된 정보를 읽고 쓸 수 있는 메소드가 제공됨

### 소켓 프로그래밍

- 소켓을 이용한 통신 프로그래밍을 뜻함, 소켓이란 프로세스간의 통신에 사용되는 양쪽 끝단을 의미함, 프로세스간의 통신을 위해 필요한 것
- [java.net](http://java.net) 패키지가 소켓 프로그래밍을 지원함

### TCP와 UDP

- TCP
    - 연결기반(connection-oriented)
        - 연결 후 통신(전화기)
        - 1:1 통신방식
    - 데이터의 경계를 구분안함(byte-stream)
    - 신뢰성 있는 데이터 전송
        - 데이터의 전송순서가 보장됨
        - 데이터의 수신여부를 확인함(데이터가 손실되면 재전송됨)
        - 패킷을 관리할 필요가 없음
    - UDP보다 전송속도가 느림
    - Socket, ServerSocket 클래스
- UDP
    - 비연결기반(connectionless-oriented)
        - 연결없이 통신(소포)
        - 1:1, 1:n, n:n 통신방식
    - 데이터의 경계를 구분함(datagram)
    - 신뢰성 없는 데이터 전송
        - 데이터의 전송순서가 바뀔 수 있음
        - 데이터의 수신여부를 확인안함(데이터가 손실되어도 알 수 없음)
        - 패킷을 관리해주어야 함
    - TCP보다 전송속도가 빠름
    - DatagramSocket
    - DatagramPacket
    - MulticastSocket
- TCP는 위의 특징으로 인해서 파일을 주고받을 때 적합함
- UDP는 게임이나 동영상의 데이터를 전송하는 경우 중간에 손실되어도 빠른 전송이 필요할 때 적합함
- 이러한 특징을 생각하여 목적에 맞게 잘 활용해야함

### TCP소켓 프로그래밍

- 클라이언트와 서버간의 일대일 통신임, 서버 프로그램이 실행되어 클라이언트 프로그램의 연결요청을 기다리고 있어야 함
- 서버 프로그램에서는 서버소켓을 사용해서 서버 컴퓨터의 특정 포트에서 클라이언트의 연결요청을 처리할 준비를 함
- 클라이언트 프로그램은 접속할 서버의 IP주소와 포트 정보를 가지고 소켓을 생성해서 서버에 연결을 요청함
- 서버소켓은 클라이언트의 연결요청을 받으면 서버에 새로운 소켓을 생성해서 클라이언트 소켓과 연결되도록 함
- 이제 클라이언트의 소켓과 새로 생성된 서버의 소켓은 서버소켓과 관계없이 일대일 통신을 함
- 서버소켓은 소켓간의 연결만 처리하고 실제 데이터는 소켓들끼리 서로 주고받음
- 소켓들이 데이터를 주고받는 연결통로는 바로 입출력스트림임
- Socket 클래스 - 프로세스간의 통신을 담당하며, InputStream과 OutputStream을 가지고 있음 / 이 두 스트림을 통해 프로세스간의 통신(입출력)이 이루어짐
- ServerSocket 클래스 - 포트와 연결(bind)되어 외부의 연결요청을 기다리다 연결요청이 들어오면, Socket을 생성해서 소켓과 소켓간의 통신이 이루어지도록 함 / 한 포트에 하나의 ServerSocket만 연결할 수 있음(프로토콜이 다르면 같은 포트를 공유할 수 있음)
- 서버와 클라이언트의 연결과정
    - 서버프로그램(TcpIpServer.java)를 실행함
    - 서버 소켓을 생성함 `serverSocket = new ServerSocket(7777); // TcpIpServer.java`
    - 서버소켓이 클라이언트 프로그램의 연결요청을 처리할 수 있도록 대기상태로 만듬, 클라이언트 프로그램의 연결요청이 오면 새로운 소켓을 생성해서 클라이언트 프로그램의 소켓과 연결함 `Socket socket = serverSocket.accept(); // TcpIpServer.java`
    - 클라이언트 프로그램(TcpIpClient.java)에서 소켓을 생성하여 서버소켓에 연결을 요청함 `Socket socket = new Socket("192.168.10.100", 7777);`
    - 서버소켓은 클라이언트 프로그램의 연결요청을 받아 새로운 소켓을 생성하여 클라이언트 프로그램의 소켓과 연결함 `Socket socket = serverSocket.accept();`
    - 서버소켓은 클라이언트 프로그램의 연결요청을 받아 새로운 소켓을 생성하여 클라이언트 프로그램의 소켓과 연결함
- 이 때 여러 개의 쓰레드를 생성해서 클라이언트의 요청을 동시에 처리할 수 있음, 접속하려는 클라이언트의 수가 많을수록 쓰레드를 이용해서 클라이언트의 요청을 병렬적으로 처리하는 것이 좋음

### UDP소켓 프로그래밍

- DatagramSocket과 DatagramPacket을 사용함
- 연결지향적인 프로토콜이 아니기 때문에 ServerSocket이 필요하지 않음
- UDP통신에서 사용하는 소켓은 DatagramSocket이며 데이터를 DatagramPacket에 담아서 전송함
- 클라이언트가 DatagramPacket을 생성해서 DatagramSocket으로 서버에 전송하면, 서버는 전송받은 DatagramPacket의 getAddress(), getPort()를 호출해서 클라이언트의 정보를 얻어서 서버시간을 DatagramPacket에 담아서 전송함